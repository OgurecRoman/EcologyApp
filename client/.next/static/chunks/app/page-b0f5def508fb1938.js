(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6764:(e,t,n)=>{Promise.resolve().then(n.bind(n,1804))},1804:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>q});var o=n(5155),s=n(237),r=n(2115);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}let i=(e,t)=>{let n={};for(let o in e)-1===t.indexOf(o)&&(n[o]=e[o]);return n},c=r.createContext(null),l=r.createContext(null),p=e=>t=>r.createElement(l.Consumer,null,n=>r.createElement(e,a({parent:n},t))),u=(e=[])=>{let[t,n]=(0,r.useState)(!1),o=(0,r.useRef)(e),s=(()=>{let e=(0,r.useContext)(c);if(null===e)throw Error("Couldn't find Yandex.Maps API in the context. Make sure that hook useYMaps is inside <YMaps /> provider");return e})(),a=s.getApi();return(0,r.useEffect)(()=>{s.load().then(()=>Promise.all(o.current.map(s.loadModule))).then(()=>n(!0))},[]),t&&a?a:null},d=()=>{},m=["onLoad","onError","modules","apiLoader"];function h(e,t=!1,n=[]){return o=>{let{width:s,height:c,modules:l=[],onLoad:p=d}=o,h=u(n.concat(l)),f=!t||!!h,y=i(o,m);return(0,r.useEffect)(()=>h?p(h):void 0,[h]),f?r.createElement(e,a({ymaps:h},y)):r.createElement("div",{style:{width:s,height:c}})}}let f="undefined"!=typeof window,y={lang:"ru_RU",load:"",ns:"",mode:"release"},v=e=>{let{version:t="2.1",enterprise:n=!1,query:o={lang:"ru_RU",load:"",ns:""},preload:s=!1,children:a}=e,i=(0,r.useRef)((e=>{let t;let{query:n=y}=e,o=Date.now().toString(32),s=n.ns||"",r="__yandex-maps-api-onload__$$"+o,a="__yandex-maps-api-onerror__$$"+o,i=f?window:{},c={},l=()=>s?i[s]:t,p=()=>{delete i[r],delete i[a]};return{load:()=>{if(l())return Promise.resolve(t);if(c[s])return c[s];let o={onload:r,onerror:a,...y,...n},u=Object.keys(o).map(e=>`${e}=${o[e]}`).join("&"),d=[`https://${e.enterprise?"enterprise.":""}api-maps.yandex.ru`,e.version,"?"+u].join("/");return c[s]=new Promise((e,n)=>{i[r]=n=>{p(),n.ready(()=>{t=n,e(n)})},i[a]=e=>{p(),n(e)},new Promise((e,t)=>{let n=document.createElement("script");n.type="text/javascript",n.onload=e,n.onerror=t,n.src=d,n.async=!0,document.head.appendChild(n)}).catch(i[a])}),c[s]},getApi:l,loadModule:e=>new Promise((n,o)=>{t.modules.require(e).done(o=>{o.forEach(n=>{((e,t,n,o=!1)=>{let s="string"==typeof t?t.split("."):t.slice(),r,a=e;for(;s.length>1;)a[r=s.shift()]||(a[r]={}),a=a[r];let i=s[0];a[i]=!0===o&&a[i]||n})(t,e,n,!0)}),n(t)},o)})}})({version:t,enterprise:n,query:o,preload:s}));return(0,r.useEffect)(()=>{s&&i.current.load()},[i.current]),r.createElement(c.Provider,{value:i.current},a)},b=/^on(?=[A-Z])/;function j(e){return Object.keys(e).reduce((t,n)=>{if(b.test(n)){let o=n.replace(b,"").toLowerCase();t._events[o]=e[n]}else t[n]=e[n];return t},{_events:{}})}function O(e,t,n){"function"==typeof n&&e.events.add(t,n)}function E(e,t,n){"function"==typeof n&&e.events.remove(t,n)}function g(e,t,n){Object.keys(Object.assign({},t,n)).forEach(o=>{t[o]!==n[o]&&(E(e,o,t[o]),O(e,o,n[o]))})}let C=e=>"default"+e.charAt(0).toUpperCase()+e.slice(1);function x(e,t){return void 0!==e[t]||void 0===e[C(t)]}function _(e,t,n){return(x(e,t)?e[t]:e[C(t)])||n}function R(e,t,n=null){e!==t&&(e&&("current"in e?e.current=null:"function"==typeof e&&e(null)),t&&("current"in t?t.current=n:"function"==typeof t&&t(n)))}function S(e){let{width:t,height:n,style:o,className:s}=e;return void 0!==o||void 0!==s?Object.assign({},o&&{style:o},s&&{className:s}):{style:{width:t,height:n}}}class w extends r.Component{constructor(e){super(e),this.state={error:null,errorInfo:null}}componentDidCatch(e,t){let{onError:n=()=>{}}=this.props;n(e),this.setState({error:e,errorInfo:t})}render(){return this.state.error?null:this.props.children}}let L=e=>({onError:t,...n})=>r.createElement(w,{onError:t},r.createElement(e,n));class N extends r.Component{constructor(){super(),this.instance=null,this.state={instance:null},this._parentElement=null,this._getRef=e=>{this._parentElement=e}}componentDidMount(){this.instance=N.mountObject(this._parentElement,this.props.ymaps.Map,this.props),this.setState({instance:this.instance})}componentDidUpdate(e){null!==this.instance&&N.updateObject(this.instance,e,this.props)}componentWillUnmount(){N.unmountObject(this.instance,this.props)}render(){let e=S(this.props),t=i(j(this.props),["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return r.createElement(l.Provider,{value:this.state.instance},r.createElement("div",a({ref:this._getRef},e,t),this.props.children))}static mountObject(e,t,n){let{instanceRef:o,_events:s}=j(n),r=new t(e,_(n,"state"),_(n,"options"));return Object.keys(s).forEach(e=>O(r,e,s[e])),R(null,o,r),r}static updateObject(e,t,n){let{_events:o,instanceRef:s}=j(n),{_events:r,instanceRef:a}=j(t);if(x(n,"state")){let o=_(t,"state",{}),s=_(n,"state",{});o.type!==s.type&&e.setType(s.type),o.behaviors!==s.behaviors&&(o.behaviors&&e.behaviors.disable(o.behaviors),s.behaviors&&e.behaviors.enable(s.behaviors)),s.zoom&&o.zoom!==s.zoom&&e.setZoom(s.zoom),s.center&&o.center!==s.center&&e.setCenter(s.center),s.bounds&&o.bounds!==s.bounds&&e.setBounds(s.bounds)}if(x(n,"options")){let o=_(t,"options"),s=_(n,"options",{});o!==s&&e.options.set(s)}_(t,"width")===_(n,"width")&&_(t,"height")===_(n,"height")||e.container.fitToViewport(),g(e,r,o),R(a,s,e)}static unmountObject(e,t){let{instanceRef:n,_events:o}=j(t);null!==e&&(Object.keys(o).forEach(t=>E(e,t,o[t])),e.destroy(),R(n))}}let T=L(h(N,!0,["Map"]));T.defaultProps={width:320,height:240};class P extends r.Component{constructor(){super(),this.state={instance:null},this._parentElement=null,this._getRef=e=>{this._parentElement=e}}componentDidMount(){this._mounted=!0,this.props.ymaps.panorama.isSupported()&&P.mountObject(this._parentElement,this.props.ymaps.panorama,this.props).then(e=>this._mounted&&this.setState({instance:e}))}componentDidUpdate(e){null!==this.state.instance&&P.updateObject(this.state.instance,e,this.props)}componentWillUnmount(){this._mounted=!1,P.unmountObject(this.state.instance,this.props)}render(){let e=S(this.props);return r.createElement("div",a({ref:this._getRef},e))}static mountObject(e,t,n){let{instanceRef:o,_events:s}=j(n),r=_(n,"point"),a=_(n,"locateOptions"),i=_(n,"options");return new Promise((n,c)=>{t.locate(r,a).done(r=>{if(r.length>0){let a=new t.Player(e,r[0],i);R(null,o,a),Object.keys(s).forEach(e=>O(a,e,s[e])),n(a)}},c)})}static updateObject(e,t,n){let{_events:o,instanceRef:s}=j(n),{_events:r,instanceRef:a}=j(t);if(x(n,"options")){let o=_(t,"options"),s=_(n,"options");o!==s&&e.options.set(s)}if(x(n,"point")){let o=_(n,"point"),s=_(t,"point"),r=_(n,"locateOptions");o!==s&&e.moveTo(o,r)}g(e,r,o),R(a,s,e)}static unmountObject(e,t){let{instanceRef:n,_events:o}=j(t);null!==e&&(Object.keys(o).forEach(t=>E(e,t,o[t])),R(n))}}L(h(P,!0,["panorama.isSupported","panorama.locate","panorama.createPlayer","panorama.Player"])).defaultProps={width:320,height:240};class k extends r.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){let e=k.mountControl(this.props.ymaps.control[this.props.name],this.props);this.instance=e,this.setState({instance:e})}componentDidUpdate(e){null!==this.instance&&k.updateControl(this.instance,e,this.props)}componentWillUnmount(){k.unmountControl(this.instance,this.props)}render(){return r.createElement(l.Provider,{value:this.state.instance},this.props.children)}static mountControl(e,t){let{instanceRef:n,parent:o,lazy:s,_events:r}=j(t),a=new e({data:_(t,"data"),options:_(t,"options"),state:_(t,"state"),mapTypes:_(t,"mapTypes"),lazy:s});if(Object.keys(r).forEach(e=>O(a,e,r[e])),o&&o.controls&&"function"==typeof o.controls.add)o.controls.add(a);else{if(!o||!o.add||"function"!=typeof o.add)throw Error(`No parent found to mount ${t.name}`);o.add(a)}return R(null,n,a),a}static updateControl(e,t,n){let{_events:o,instanceRef:s}=j(n),{_events:r,instanceRef:a}=j(t);if(x(n,"options")){let o=_(t,"options"),s=_(n,"options");o!==s&&e.options.set(s)}if(x(n,"data")){let o=_(t,"data"),s=_(n,"data");o!==s&&e.data.set(s)}if(x(n,"state")){let o=_(t,"state"),s=_(n,"state");o!==s&&e.state.set(s)}if(x(n,"mapTypes")){let o=_(t,"mapTypes"),s=_(n,"mapTypes");o!==s&&(e.removeAllMapTypes(),s.forEach(t=>e.addMapType(t)))}g(e,r,o),R(a,s,e)}static unmountControl(e,t){let{instanceRef:n,parent:o,_events:s}=j(t);null!==e&&(Object.keys(s).forEach(t=>E(e,t,s[t])),o.controls&&"function"==typeof o.controls.remove?o.controls.remove(e):o.remove&&"function"==typeof o.remove&&o.remove(e),R(n))}}L(p(h(e=>r.createElement(k,a({},e,{name:"Button"})),!0,["control.Button"]))),L(p(h(e=>r.createElement(k,a({},e,{name:"FullscreenControl"})),!0,["control.FullscreenControl"]))),L(p(h(e=>r.createElement(k,a({},e,{name:"GeolocationControl"})),!0,["control.GeolocationControl"]))),L(p(h(e=>r.createElement(k,a({},e,{name:"ListBox"})),!0,["control.ListBox"]))),L(p(h(e=>r.createElement(k,a({},e,{name:"ListBoxItem"})),!0,["control.ListBoxItem"]))),L(p(h(e=>r.createElement(k,a({},e,{name:"RouteButton"})),!0,["control.RouteButton"]))),L(p(h(e=>r.createElement(k,a({},e,{name:"RouteEditor"})),!0,["control.RouteEditor"]))),L(p(h(e=>r.createElement(k,a({},e,{name:"RoutePanel"})),!0,["control.RoutePanel"]))),L(p(h(e=>r.createElement(k,a({},e,{name:"RulerControl"})),!0,["control.RulerControl"]))),L(p(h(e=>r.createElement(k,a({},e,{name:"SearchControl"})),!0,["control.SearchControl"]))),L(p(h(e=>r.createElement(k,a({},e,{name:"TrafficControl"})),!0,["control.TrafficControl"]))),L(p(h(e=>r.createElement(k,a({},e,{name:"TypeSelector"})),!0,["control.TypeSelector"]))),L(p(h(e=>r.createElement(k,a({},e,{name:"ZoomControl"})),!0,["control.ZoomControl"])));class I extends r.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){let e=I.mountObject(this.props.ymaps.Clusterer,this.props);this.instance=e,this.setState({instance:e})}componentDidUpdate(e){null!==this.state.instance&&I.updateObject(this.instance,e,this.props)}componentWillUnmount(){I.unmountObject(this.instance,this.props)}render(){return r.createElement(l.Provider,{value:this.state.instance},this.props.children)}static mountObject(e,t){let{instanceRef:n,parent:o,_events:s}=j(t),r=new e(_(t,"options"));if(Object.keys(s).forEach(e=>O(r,e,s[e])),o.geoObjects&&"function"==typeof o.geoObjects.add)o.geoObjects.add(r);else{if(!o.add||"function"!=typeof o.add)throw Error("No parent found to mount Clusterer");o.add(r)}return R(null,n,r),r}static updateObject(e,t,n){let{_events:o,instanceRef:s}=j(n),{_events:r,instanceRef:a}=j(t);if(x(n,"options")){let o=_(t,"options"),s=_(n,"options");o!==s&&e.options.set(s)}g(e,r,o),R(a,s,e)}static unmountObject(e,t){let{instanceRef:n,parent:o,_events:s}=j(t);null!==e&&(Object.keys(s).forEach(t=>E(e,t,s[t])),o.geoObjects&&"function"==typeof o.geoObjects.remove?o.geoObjects.remove(e):o.remove&&"function"==typeof o.remove&&o.remove(e),R(n))}}L(p(h(I,!0,["Clusterer"])));class A extends r.Component{constructor(){super(),this.state={instance:null}}componentDidMount(){let e=A.mountObject(this.props.ymaps.ObjectManager,this.props);this.instance=e,this.setState({instance:e})}componentDidUpdate(e){null!==this.instance&&A.updateObject(this.instance,e,this.props)}componentWillUnmount(){A.unmountObject(this.instance,this.props)}render(){return null}static mountObject(e,t){let{instanceRef:n,parent:o,_events:s}=j(t),r=_(t,"options",{}),a=_(t,"features",{}),i=_(t,"filter",null),c=_(t,"objects",{}),l=_(t,"clusters",{}),p=new e(r);if(p.add(a||[]),p.setFilter(i),p.objects.options.set(c),p.clusters.options.set(l),Object.keys(s).forEach(e=>O(p,e,s[e])),o.geoObjects&&"function"==typeof o.geoObjects.add)o.geoObjects.add(p);else{if(!o.add||"function"!=typeof o.add)throw Error("No parent found to mount ObjectManager");o.add(p)}return R(null,n,p),p}static updateObject(e,t,n){let{_events:o,instanceRef:s}=j(n),{_events:r,instanceRef:a}=j(t);if(x(n,"options")){let o=_(t,"options"),s=_(n,"options");o!==s&&e.options.set(s)}if(x(n,"objects")){let o=_(t,"objects"),s=_(n,"objects");o!==s&&e.objects.options.set(s)}if(x(n,"clusters")){let o=_(t,"clusters"),s=_(n,"clusters");o!==s&&e.clusters.options.set(s)}if(x(n,"filter")){let o=_(t,"filter"),s=_(n,"filter");o!==s&&e.setFilter(s)}if(x(n,"features")){let o=_(t,"features"),s=_(n,"features");o!==s&&(e.remove(o),e.add(s))}g(e,r,o),R(a,s,e)}static unmountObject(e,t){let{instanceRef:n,parent:o,_events:s}=j(t);null!==e&&(Object.keys(s).forEach(t=>E(e,t,s[t])),o.geoObjects&&"function"==typeof o.geoObjects.remove?o.geoObjects.remove(e):o.remove&&"function"==typeof o.remove&&o.remove(e),R(n))}}L(p(h(A,!0,["ObjectManager"])));class M extends r.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){let{name:e,ymaps:t,dangerZone:n}=this.props,o=M.mountObject(n&&"function"==typeof n.modifyConstructor?n.modifyConstructor(t[e]):t[e],this.props);this.instance=o,this.setState({instance:o})}componentDidUpdate(e){null!==this.instance&&M.updateObject(this.instance,e,this.props)}componentWillUnmount(){M.unmountObject(this.instance,this.props)}render(){return null}static mountObject(e,t){let{instanceRef:n,parent:o,_events:s}=j(t),r=new e(_(t,"geometry"),_(t,"properties"),_(t,"options"));if(Object.keys(s).forEach(e=>O(r,e,s[e])),o&&o.geoObjects&&"function"==typeof o.geoObjects.add)o.geoObjects.add(r);else{if(!o||!o.add||"function"!=typeof o.add)throw Error(`No parent found to mount ${t.name}`);o.add(r)}return R(null,n,r),r}static updateObject(e,t,n){let{_events:o,instanceRef:s}=j(n),{_events:r,instanceRef:a}=j(t);if(x(n,"geometry")){let o=_(t,"geometry",{}),s=_(n,"geometry",{});Array.isArray(s)&&s!==o?Array.isArray(s[0])&&"number"==typeof s[1]?(e.geometry.setCoordinates(s[0]),e.geometry.setRadius(s[1])):e.geometry.setCoordinates(s):"object"==typeof s&&(s.coordinates!==o.coordinates&&e.geometry.setCoordinates(s.coordinates),s.radius!==o.radius&&e.geometry.setRadius(s.radius))}if(x(n,"properties")){let o=_(t,"properties"),s=_(n,"properties");o!==s&&e.properties.set(s)}if(x(n,"options")){let o=_(t,"options"),s=_(n,"options");o!==s&&e.options.set(s)}g(e,r,o),R(a,s,e)}static unmountObject(e,t){let{instanceRef:n,parent:o,_events:s}=j(t);null!==e&&(Object.keys(s).forEach(t=>E(e,t,s[t])),o.geoObjects&&"function"==typeof o.geoObjects.remove?o.geoObjects.remove(e):o.remove&&"function"==typeof o.remove&&o.remove(e),R(n))}}let U={modifyConstructor(e){function t(t,n,o){e.call(this,{geometry:t,properties:n},o)}return t.prototype=e.prototype,t}};L(p(h(e=>r.createElement(M,a({},e,{name:"GeoObject",dangerZone:U})),!0,["GeoObject"]))),L(p(h(e=>r.createElement(M,a({},e,{name:"Circle"})),!0,["Circle"])));var B=L(p(h(e=>r.createElement(M,a({},e,{name:"Placemark"})),!0,["Placemark"])));L(p(h(e=>r.createElement(M,a({},e,{name:"Polygon"})),!0,["Polygon"]))),L(p(h(e=>r.createElement(M,a({},e,{name:"Polyline"})),!0,["Polyline"]))),L(p(h(e=>r.createElement(M,a({},e,{name:"Rectangle"})),!0,["Rectangle"])));var D=n(2021),z=n(8494);function $(e){let{onFiltersChange:t}=e,[n,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)([]),c=e=>{let n=a.includes(e)?a.filter(t=>t!==e):[...a,e];i(n),t(n)};return(0,o.jsxs)("div",{className:"event-filters",children:[(0,o.jsxs)(D.$n,{onClick:()=>s(!n),className:"filters-toggle",children:[(0,o.jsx)("span",{children:"Фильтры"}),a.length>0&&(0,o.jsx)("span",{className:"filters-badge",children:a.length}),(0,o.jsx)("span",{className:"arrow ".concat(n?"open":""),children:"▼"})]}),n&&(0,o.jsxs)("div",{className:"filters-dropdown",children:[(0,o.jsxs)("div",{className:"filters-header",children:[(0,o.jsx)("h3",{children:"Типы событий"}),a.length>0&&(0,o.jsx)(D.$n,{onClick:()=>{i([]),t([])},className:"clear-btn",children:"Очистить"})]}),(0,o.jsx)("div",{className:"filters-list",children:Object.values(z.B).map(e=>(0,o.jsxs)("label",{className:"filter-item",children:[(0,o.jsx)("input",{type:"checkbox",checked:a.includes(e),onChange:()=>c(e)}),(0,o.jsx)("span",{children:z.S[e]})]},e))})]})]})}function G(e){let{event:t,coordinates:n,onClick:s,isSelected:r}=e,a='\n    <div style="padding: 12px; max-width: 300px;">\n      <h3 style="margin: 0 0 8px 0; font-size: 16px; font-weight: 600;">'.concat(t.name,'</h3>\n      <p style="margin: 4px 0; font-size: 14px; color: #666;"><strong>Тип:</strong> ').concat(z.S[t.type]||t.type,'</p>\n      <p style="margin: 4px 0; font-size: 14px; color: #666;"><strong>Дата:</strong> ').concat(new Date(t.date).toLocaleDateString("ru-RU"),'</p>\n      <p style="margin: 4px 0; font-size: 14px; color: #666;"><strong>Адрес:</strong> ').concat(t.address,'</p>\n      <p style="margin: 4px 0; font-size: 14px; color: #666;"><strong>Автор:</strong> ').concat(t.author,"</p>\n      ").concat(t.description?'<p style="margin: 8px 0 0 0; font-size: 14px;">'.concat(t.description,"</p>"):"","\n    </div>\n  ");return(0,o.jsx)(B,{geometry:n,properties:{balloonContent:a,hintContent:t.name},options:{preset:r?"islands#redIcon":"islands#blueIcon",balloonMaxWidth:350},onClick:s})}n(7997);var F=n(2845);let W=async e=>{try{let t=await fetch("https://geocode-maps.yandex.ru/1.x/?apikey=".concat("aeef4bf9-21d0-4994-bc36-c21a1a09e8e7","&geocode=").concat(encodeURIComponent(e),"&format=json")),n=(await t.json()).response.GeoObjectCollection.featureMember[0];if(n){let e=n.GeoObject.Point.pos.split(" ");return[Number.parseFloat(e[1]),Number.parseFloat(e[0])]}return null}catch(e){return console.error("Geocoding error:",e),null}};var Y=n(3596);function Z(){let[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)({center:[55.751574,37.573856],zoom:10}),[a,i]=(0,r.useState)(null),[c,l]=(0,r.useState)({}),{events:p,loading:u}=(0,F.L)(e),{selectedEvent:d,setSelectedEvent:m}=(0,Y.v)();return(0,r.useEffect)(()=>{let e=async()=>{let e={};for(let t of p)if(!c[t.id]){let n=await W(t.address);n&&(e[t.id]=n)}Object.keys(e).length>0&&l(t=>({...t,...e}))};p.length>0&&e()},[p]),(0,r.useEffect)(()=>{d&&c[d.id]&&(s({center:c[d.id],zoom:15}),i(d.id),m(null))},[d,c,m]),(0,o.jsxs)("div",{className:"map-view",children:[(0,o.jsx)("div",{className:"map-filters-container",children:(0,o.jsx)($,{onFiltersChange:t})}),u&&(0,o.jsxs)("div",{className:"map-loading",children:[(0,o.jsx)("div",{className:"spinner"}),(0,o.jsx)("p",{children:"Загрузка событий..."})]}),(0,o.jsx)(v,{query:{apikey:"aeef4bf9-21d0-4994-bc36-c21a1a09e8e7"},children:(0,o.jsx)(T,{state:n,className:"yandex-map",modules:["geoObject.addon.balloon","geoObject.addon.hint"],children:p.map(e=>{let t=c[e.id];return t?(0,o.jsx)(G,{event:e,coordinates:t,isSelected:a===e.id,onClick:()=>i(e.id)},e.id):null})})})]})}function q(){return(0,o.jsx)(s.A,{children:(0,o.jsx)(Z,{})})}n(1397)},504:(e,t,n)=>{"use strict";n.d(t,{getMyEvents:()=>r,kQ:()=>s,lh:()=>a,ns:()=>i});let o=n(2651).A.create({baseURL:"https://ecology-app-test.vercel.app",headers:{"Content-Type":"application/json"}}),s=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new URLSearchParams;e.forEach(e=>t.append("type",e));let n="/events".concat(t.toString()?"?"+t.toString():"");return(await o.get(n)).data},r=async e=>(await o.get("/events/my?userId=".concat(e))).data,a=async e=>(await o.post("/events",e)).data,i=async(e,t)=>(await o.post("/join",{userId:e,eventId:t})).data},237:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var o=n(5155),s=n(6046),r=n(2021);function a(){let e=(0,s.usePathname)(),t=(0,s.useRouter)();return(0,o.jsx)("nav",{className:"bottom-navigation",children:[{path:"/",label:"Карты"},{path:"/events",label:"События"},{path:"/profile",label:"Профиль"}].map(n=>(0,o.jsx)(r.T0,{onClick:()=>t.push(n.path),className:e===n.path?"active":"",children:n.label},n.path))})}function i(e){let{children:t}=e;return(0,o.jsxs)("div",{className:"app-layout",children:[(0,o.jsx)("main",{className:"app-content",children:t}),(0,o.jsx)(a,{})]})}n(4409),n(203)},3596:(e,t,n)=>{"use strict";n.d(t,{f:()=>a,v:()=>i});var o=n(5155),s=n(2115);let r=(0,s.createContext)(void 0);function a(e){let{children:t}=e,[n,a]=(0,s.useState)(null);return(0,o.jsx)(r.Provider,{value:{selectedEvent:n,setSelectedEvent:a},children:t})}function i(){let e=(0,s.useContext)(r);if(void 0===e)throw Error("useSelectedEvent must be used within SelectedEventProvider");return e}},2845:(e,t,n)=>{"use strict";n.d(t,{L:()=>r,n:()=>a});var o=n(2115),s=n(504);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,o.useState)([]),[r,a]=(0,o.useState)(!0),[i,c]=(0,o.useState)(null);return(0,o.useEffect)(()=>{(async()=>{try{a(!0);let t=await (0,s.kQ)(e);n(t),c(null)}catch(e){c(e.message),n([])}finally{a(!1)}})()},[e.join(",")]),{events:t,loading:r,error:i,refetch:()=>(0,s.kQ)(e).then(n)}}function a(e){let[t,s]=(0,o.useState)([]),[r,a]=(0,o.useState)(!0),[i,c]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let t=async()=>{try{a(!0);let{getMyEvents:t}=await Promise.resolve().then(n.bind(n,504)),o=await t(e);s(o),c(null)}catch(e){c(e.message),s([])}finally{a(!1)}};e&&t()},[e]),{events:t,loading:r,error:i}}},8494:(e,t,n)=>{"use strict";n.d(t,{B:()=>o,S:()=>s});let o={SUBBOTNIK:"SUBBOTNIK",PAPER_COLLECTION:"PAPER COLLECTION",BATTERY_COLLECTION:"BATTERY COLLECTION",PLASTIC_COLLECTION:"PLASTIC COLLECTION",GLASS_COLLECTION:"GLASS COLLECTION",ELECTRONICS_COLLECTION:"ELECTRONICS COLLECTION",OTHER:"OTHER"},s={[o.SUBBOTNIK]:"Субботник",[o.PAPER_COLLECTION]:"Сбор бумаги",[o.BATTERY_COLLECTION]:"Сбор батареек",[o.PLASTIC_COLLECTION]:"Сбор пластика",[o.GLASS_COLLECTION]:"Сбор стекла",[o.ELECTRONICS_COLLECTION]:"Сбор электроники",[o.OTHER]:"Другое"}},4409:()=>{},7997:()=>{},203:()=>{},1397:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[953,817,810,651,441,517,358],()=>t(6764)),_N_E=e.O()}]);